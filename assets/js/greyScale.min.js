!function(e){e.fn.greyScale=function(t){function o(t,o,a){for(can=e("<canvas>").css({display:"none",left:"0",position:"absolute",top:"0"}).attr({width:o,height:a}).addClass("gsCanvas"),ctx=can[0].getContext("2d"),ctx.drawImage(t,0,0,o,a),imageData=ctx.getImageData(0,0,o,a),px=imageData.data,i=0;i<px.length;i+=4)grey=.3*px[i]+.59*px[i+1]+.11*px[i+2],px[i]=px[i+1]=px[i+2]=grey;return ctx.putImageData(imageData,0,0),can}$options=e.extend({fadeTime:e.fx.speeds._default,reverse:!1},t),navigator.userAgent.match(/msie/i)&&navigator.userAgent.match(/6/)?this.each(function(){var t=$options.reverse?0:1;e(this).css({filter:"progid:DXImageTransform.Microsoft.BasicImage(grayscale="+t+")",zoom:"1"}),e(this).hover(function(){var t=$options.reverse?1:0;e(this).css({filter:"progid:DXImageTransform.Microsoft.BasicImage(grayscale="+t+")"})},function(){var t=$options.reverse?0:1;e(this).css("filter","progid:DXImageTransform.Microsoft.BasicImage(grayscale="+t+")")})}):(this.each(function(t){e(this).wrap('<div class="gsWrapper">'),gsWrapper=e(this).parent(),gsWrapper.css({position:"relative",display:"inline-block"}),window.location.hostname!==this.src.split("/")[2]?e.getImageData({url:e(this).attr("src"),success:e.proxy(function(e){can=o(e,e.width,e.height),$options.reverse?can.appendTo(gsWrapper).css({display:"block",opacity:"0"}):can.appendTo(gsWrapper).fadeIn($options.fadeTime)},gsWrapper),error:function(e,t){}}):(can=o(e(this)[0],e(this).width(),e(this).height()),$options.reverse?can.appendTo(gsWrapper).css({display:"block",opacity:"0"}):can.appendTo(gsWrapper).fadeIn($options.fadeTime))}),e(this).parent().delegate(".gsCanvas","mouseover mouseout",function(t){over=$options.reverse?1:0,out=$options.reverse?0:1,"mouseover"==t.type&&e(this).stop().animate({opacity:over},$options.fadeTime),"mouseout"==t.type&&e(this).stop().animate({opacity:out},$options.fadeTime)}))}}(jQuery),function(e,t){function o(){}function a(e){i=[e]}function r(e,t,o){return e&&e.apply(t.context||t,o)}function s(s){function D(e){!O++&&t(function(){q(),S&&(I[M]={s:[e]}),W&&(e=W.apply(s,[e])),r(s.success,s,[e,y]),r(k,s,[s,y])},0)}function j(e){!O++&&t(function(){q(),S&&e!=x&&(I[M]=e),r(s.error,s,[s,e]),r(k,s,[s,e])},0)}var C,k=(s=e.extend({},b,s)).complete,W=s.dataFilter,B=s.callbackParameter,F=s.callback,Q=s.cache,S=s.pageCache,_=s.charset,M=s.url,X=s.data,A=s.timeout,O=0,q=o;return s.abort=function(){!O++&&q()},!1===r(s.beforeSend,s,[s])||O?s:(M=M||p,X=X?"string"==typeof X?X:e.param(X,s.traditional):p,M+=X?(/\?/.test(M)?"&":"?")+X:p,B&&(M+=(/\?/.test(M)?"&":"?")+encodeURIComponent(B)+"=?"),!Q&&!S&&(M+=(/\?/.test(M)?"&":"?")+"_"+(new Date).getTime()+"="),M=M.replace(/=\?(&|$)/,"="+F+"$1"),S&&(C=I[M])?C.s?D(C.s[0]):j(C):t(function(r,s,p){if(!O){p=A>0&&t(function(){j(x)},A),q=function(){p&&clearTimeout(p),r[g]=r[l]=r[h]=r[d]=null,T[m](r),s&&T[m](s)},window[F]=a,(r=e(v)[0]).id=f+$++,_&&(r[c]=_);var y=function(e){(r[l]||o)(),e=i,i=void 0,e?D(e[0]):j(u)};w.msie?(r.event=l,r.htmlFor=r.id,r[g]=function(){/loaded|complete/.test(r.readyState)&&y()}):(r[d]=r[h]=y,w.opera?(s=e(v)[0]).text="jQuery('#"+r.id+"')[0]."+d+"()":r[n]=n),r.src=M,T.insertBefore(r,T.firstChild),s&&T.insertBefore(s,T.firstChild)}},0),s)}var i,n="async",c="charset",p="",u="error",f="_jqjsp",l="onclick",d="on"+u,h="onload",g="onreadystatechange",m="removeChild",v="<script/>",y="success",x="timeout",w=e.browser,T=e("head")[0]||document.documentElement,I={},$=0,b={callback:f,url:location.href};s.setup=function(t){e.extend(b,t)},e.jsonp=s}(jQuery,setTimeout),function(e){e.getImageData=function(t){var o=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(t.url){var a="https:"===location.protocol,r="";r=t.server&&o.test(t.server)&&t.server.indexOf("https:")&&(a||t.url.indexOf("https:"))?t.server:"//img-to-json.appspot.com/?callback=?",e.jsonp({url:r,data:{url:escape(t.url)},dataType:"jsonp",timeout:1e4,success:function(o){var a=new Image;e(a).load(function(){this.width=o.width,this.height=o.height,typeof t.success==typeof Function&&t.success(this)}).attr("src",o.data)},error:function(e,o){typeof t.error==typeof Function&&t.error(e,o)}})}else typeof t.error==typeof Function&&t.error(null,"no_url")}}(jQuery);