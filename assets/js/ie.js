window.Modernizr=window.Modernizr||function(t,e,i){function r(t,e){return typeof t===e}var n,s,o={},a=e.documentElement,l=e.createElement("modernizr"),d=l.style,h=" -webkit- -moz- -o- -ms- ".split(" "),g={svg:"http://www.w3.org/2000/svg"},c={},u=[],f=u.slice,p={}.hasOwnProperty;s=r(p,"undefined")||r(p.call,"undefined")?function(t,e){return e in t&&r(t.constructor.prototype[e],"undefined")}:function(t,e){return p.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var i=f.call(arguments,1),r=function(){if(this instanceof r){var n=function(){};n.prototype=e.prototype;var s=new n,o=e.apply(s,i.concat(f.call(arguments)));return Object(o)===o?o:s}return e.apply(t,i.concat(f.call(arguments)))};return r}),c.inlinesvg=function(){var t=e.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==g.svg};for(var m in c)s(c,m)&&(n=m.toLowerCase(),o[n]=c[m](),u.push((o[n]?"":"no-")+n));return o.addTest=function(t,e){if("object"==typeof t)for(var i in t)s(t,i)&&o.addTest(i,t[i]);else{if(t=t.toLowerCase(),void 0!==o[t])return o;e="function"==typeof e?e():e,"undefined"!=typeof enableClasses&&enableClasses&&(a.className+=" "+(e?"":"no-")+t),o[t]=e}return o},function(t){d.cssText=t}(""),l=null,o._version="2.8.3",o._prefixes=h,o}(0,this.document),Modernizr.addTest("cssfilters",function(){var t=document.createElement("div");return t.style.cssText=Modernizr._prefixes.join("filter:blur(2px); "),!!t.style.length&&(void 0===document.documentMode||document.documentMode>9)}),Modernizr.addTest("svgfilters",function(){var t=!1;try{t=void 0!==typeof SVGFEColorMatrixElement&&2==SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE}catch(t){}return t}),function(t,e,i,r){function n(e,i){var r;r=((i=i||{}).classes||{}).fade||o.classes.fade,i.fade=i.fade||e.className.indexOf(r)>-1,this.element=e,this.elementId=a++,this.settings=t.extend({},o,i),this._defaults=o,this._name=s,this.init()}var s="gray",o={fade:!1,classes:{fade:"grayscale-fade"}},a=0;t.extend(n.prototype,{init:function(){var e;!Modernizr.cssfilters&&Modernizr.inlinesvg&&Modernizr.svgfilters&&(e=t(this.element),(this.cssFilterDeprecated(e)||this.settings.fade)&&this.switchImage(e))},cssFilterDeprecated:function(t){return"none"===t.css("filter")},elementType:function(t){return"IMG"===t.prop("tagName")?"Img":"Bg"},pxToNumber:function(t){return parseInt(t.replace("px",""))},getComputedStyle:function(t){for(var i={},r={},n=0,s=(i=e.getComputedStyle(t,null)).length;s>n;n++){var o=i[n],a=i.getPropertyValue(o);r[o]=a}return r},extractUrl:function(t){return startRegex=/^url\(["']?/,endRegex=/["']?\)$/,t.replace(startRegex,"").replace(endRegex,"")},positionToNegativeMargin:function(t){var e,i;return e=t.match(/^(-?\d+\S+)/)[0],i=t.match(/\s(-?\d+\S+)$/)[0],"margin:"+i+" 0 0 "+e},getBgSize:function(e,i){var r,n,s,o,a,l;if(r=new Image,r.src=e,"auto"!==i&&"cover"!==i&&"contain"!==i&&"inherit"!==i){var d=t(this.element);n=r.width/r.height,o=parseInt((i.match(/^(\d+)px/)||[0,0])[1]),l=parseInt((i.match(/\s(\d+)px$/)||[0,0])[1]),s=d.height()*n,a=d.width()/n,o=o||s,l=l||a}return o||l?{width:o,height:l}:{width:r.width,height:r.height}},getImgParams:function(t){var e={};e.styles=this.getComputedStyle(t[0]);var i={top:this.pxToNumber(e.styles["padding-top"]),right:this.pxToNumber(e.styles["padding-right"]),bottom:this.pxToNumber(e.styles["padding-bottom"]),left:this.pxToNumber(e.styles["padding-left"])},r={top:this.pxToNumber(e.styles["border-top-width"]),right:this.pxToNumber(e.styles["border-right-width"]),bottom:this.pxToNumber(e.styles["border-bottom-width"]),left:this.pxToNumber(e.styles["border-left-width"])};return e.image={width:this.pxToNumber(e.styles.width),height:this.pxToNumber(e.styles.height)},e.svg={url:t[0].src,padding:i,borderWidth:r,width:e.image.width+i.left+i.right+r.left+r.right,height:e.image.height+i.top+i.bottom+r.top+r.bottom,offset:""},e},getBgParams:function(e){var i,r={};return i=this.extractUrl(e.css("background-image")),bgSize=this.getBgSize(i,e.css("background-size")),offset=this.positionToNegativeMargin(e.css("background-position")),r.styles=this.getComputedStyle(e[0]),r.svg=t.extend({url:i},bgSize,{offset:offset}),r.image={width:r.svg.width,height:r.svg.height},r},setStyles:function(t,e,i,r){return e.display="inline-block",e.overflow=e["overflow-x"]=e["overflow-y"]="hidden",e["background-image"]='url("'+i.url+'")',e["background-size"]=r.width+"px "+r.height+"px","Img"===t&&(e["background-repeat"]="no-repeat",e["background-position"]=i.padding.left+"px "+i.padding.top+"px",e.width=i.width,e.height=i.height),delete e.filter,e},addSVGFilterOnce:function(){$body=t("body"),$body.data("plugin_"+s+"_has_filter")||$body.data("plugin_"+s+"_has_filter","true").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0" style="position:absolute"><defs><filter id="gray"><feColorMatrix type="saturate" values="0"/></filter></defs></svg>')},switchImage:function(e){var i,r,n,s,o,a;r=this["get"+(i=this.elementType(e))+"Params"](e),n=this.settings.fade?this.settings.classes.fade:"",s=e[0].alt?' aria-labelledby="gray-title-'+this.elementId+'"':"",o=e[0].alt?'<title id="gray-title-'+this.elementId+'">'+e[0].alt+"</title>":"",a=t('<div class="grayscale grayscale-replaced '+n+'"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '+r.svg.width+" "+r.svg.height+'" width="'+r.svg.width+'" height="'+r.svg.height+'" style="'+r.svg.offset+'" role="img"'+s+">"+o+'<image filter="url(&quot;#gray&quot;)" x="0" y="0" width="'+r.image.width+'" height="'+r.image.height+'" preserveAspectRatio="none" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+r.svg.url+'" /></svg></div>'),r.styles=this.setStyles(i,r.styles,r.svg,r.image),a.css(r.styles),this.addSVGFilterOnce(),e.replaceWith(a)}}),t.fn[s]=function(e){return this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new n(this,e))}),this},t(e).on("load",function(){t(".grayscale:not(.grayscale-replaced)")[s]()})}(jQuery,window,document);